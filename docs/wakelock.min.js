window.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".info");const e=document.querySelector(".more-less"),t=document.querySelector("input"),s=async()=>{try{await navigator.wakeLock.request("screen")}catch(e){console.error(`${e.name}, ${e.message}`)}};s();const n=e=>{let t=document.querySelector("iframe");t.src="about:blank";const s=`/grab-site.php?url=${e}`;axios.post(s).then((e=>{t.contentWindow.document.write(e.data)}))},a=()=>{t.classList.add("error"),t.placeholder="required field"},o=document.querySelector(".clear-data");t.addEventListener("input",(e=>{e.target.value.length>0&&(t.classList.remove("error"),o.style.display="flex")}));const l=(e,t)=>{let s=localStorage.getItem(e);s=s?s.split(","):[],s.push(JSON.stringify(t)),localStorage.setItem(e,s)},r=()=>{const e=localStorage.getItem("sites");return e?e.split(","):e},c=()=>{const t=r(),s=document.querySelector(".site-container");if(s.innerHTML="",(()=>{const t=r();document.querySelector(".count").textContent=t?`${t.length}`:0,t?.length<=0&&(document.querySelector(".sites").classList.remove("is-active"),e.textContent="↑ show list")})(),t?.length<=0)return;const n=t?.reverse().map((e=>`\n        <div class="item-element">\n          <div class="site-item">${JSON.parse(e)}</div>\n          <div class="delete">\n            <svg class="trash">\n              <use xlink:href="#icon-bin"></use>\n            </svg>\n          </div>\n        </div>`)).join("");s.insertAdjacentHTML("afterbegin",n)};c();const i=t=>{r().length>0&&(t.classList.toggle("is-active"),e.textContent="↑ show list"===e.textContent?"↓ hide list":"↑ show list")};document.addEventListener("click",(e=>{const{target:d}=e;e.preventDefault(),s(),"load"===d.className&&(t.value.length>0?n(t.value.trim()):a()),"more"!==d.parentNode.className&&"more"!==d.className||(c(),i(d.closest(".sites"))),"delete"===d.className&&(e=>{const t=r().filter((t=>JSON.parse(t)!==e));localStorage.clear(),localStorage.setItem("sites",t.toString()),c()})(d.previousElementSibling.textContent),"add-site"===d.className&&t.value.length>0&&(l("sites",t.value.trim()),c()),"clear-data"===d.className&&(t.value="",o.removeAttribute("style")),"site-item"===d.className&&(n(d.textContent),i(d.closest(".sites")))}),!1)}));
