window.addEventListener("DOMContentLoaded",(()=>{let e=null;const t=document.querySelector(".info"),s=document.querySelector(".more-less"),n=document.querySelector("input");(async()=>{if("wakeLock"in navigator)try{t.textContent="supported",e=await navigator.wakeLock.request("screen"),t.textContent="active",e.addEventListener("release",(()=>{t.textContent="released"}))}catch(e){console.error(e)}else t.textContent=`${err}`})();const o=e=>{let t=document.querySelector("iframe");t.src="about:blank";const s=`/grab-site.php?url=${e}`;axios.post(s).then((e=>{t.contentWindow.document.write(e.data)}))},a=()=>{n.classList.add("error"),n.placeholder="required field"},l=document.querySelector(".clear-data");n.addEventListener("input",(e=>{e.target.value.length>0&&(n.classList.remove("error"),l.style.display="flex")}));const r=(e,t)=>{let s=localStorage.getItem(e);s=s?s.split(","):[],s.push(JSON.stringify(t)),localStorage.setItem(e,s)},i=()=>{const e=localStorage.getItem("sites");return e?e.split(","):e},c=()=>{const e=i(),t=document.querySelector(".site-container");if(t.innerHTML="",(()=>{const e=i();document.querySelector(".count").textContent=e?`${e.length}`:0,e?.length<=0&&(document.querySelector(".sites").classList.remove("is-active"),s.textContent="↑ show list")})(),e?.length<=0)return;const n=e?.reverse().map((e=>`\n        <div class="item-element">\n          <div class="site-item">${JSON.parse(e)}</div>\n          <div class="delete">\n            <svg class="trash">\n              <use xlink:href="#icon-bin"></use>\n            </svg>\n          </div>\n        </div>`)).join("");t.insertAdjacentHTML("afterbegin",n)};c();const d=e=>{i().length>0&&(e.classList.toggle("is-active"),s.textContent="↑ show list"===s.textContent?"↓ hide list":"↑ show list")};document.addEventListener("click",(e=>{const{target:t}=e;e.preventDefault(),"load"===t.className&&(n.value.length>0?o(n.value.trim()):a()),"more"!==t.parentNode.className&&"more"!==t.className||(c(),d(t.closest(".sites"))),"delete"===t.className&&(e=>{const t=i().filter((t=>JSON.parse(t)!==e));localStorage.clear(),localStorage.setItem("sites",t.toString()),c()})(t.previousElementSibling.textContent),"add-site"===t.className&&n.value.length>0&&(r("sites",n.value.trim()),c()),"clear-data"===t.className&&(n.value="",l.removeAttribute("style")),"site-item"===t.className&&(o(t.textContent),d(t.closest(".sites")))}),!1)}));
